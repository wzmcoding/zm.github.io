import{_ as E}from"./ValaxyMain.vue_vue_type_style_index_0_lang.D2x3T085.js";import"./chunks/@vueuse/motion.BcEIw0NR.js";import{d as c,a as m,u as g}from"./chunks/vue-router.CZk76H6s.js";import{a5 as u,a7 as a,a8 as e,a9 as s,aa as i,P as y,a6 as f,a1 as v}from"./framework.CG9Os-4p.js";import"./app.8_qfBJaY.js";import"./chunks/dayjs.BsdSHi3w.js";import"./chunks/pinia.C6T_96Gc.js";import"./chunks/vue-i18n.z_u8KU1V.js";/* empty css                    */import"./chunks/nprogress.Cm54BOVh.js";import"./YunComment.vue_vue_type_style_index_0_lang.COtyFPRy.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.C1Brb18r.js";import"./post.DGbGYUXc.js";const F=c("/posts/compiler",async l=>JSON.parse('{"title":"编译时 —— compiler-core","description":"","frontmatter":{"title":"编译时 —— compiler-core","date":"2025-10-11","updated":"2025-10-11","categories":"手写Vue3源码之编译时","tags":["手写Vue3源码之编译时"],"top":1},"headers":[],"relativePath":"pages/posts/compiler/index.md","lastUpdated":1760680509000}'),{lazy:(l,n)=>l.name===n.name}),x={__name:"index",setup(l,{expose:n}){const{data:o}=F(),k=g(),p=m(),r=Object.assign(p.meta.frontmatter||{},o.value?.frontmatter||{});return k.currentRoute.value.data=o.value,v("valaxy:frontmatter",r),globalThis.$frontmatter=r,n({frontmatter:{title:"编译时 —— compiler-core",date:"2025-10-11",updated:"2025-10-11",categories:"手写Vue3源码之编译时",tags:["手写Vue3源码之编译时"],top:1}}),(t,h)=>{const d=E;return f(),u(d,{frontmatter:y(r)},{"main-content-md":a(()=>[...h[0]||(h[0]=[s("h2",{id:"编译时-——-compiler-core",tabindex:"-1"},[s("strong",null,"编译时 —— compiler-core"),i(),s("a",{class:"header-anchor",href:"#编译时-——-compiler-core","aria-label":'Permalink to "**编译时 —— compiler-core**"'},"​")],-1),s("h2",{id:"什么是编译时",tabindex:"-1"},[i("什么是编译时？ "),s("a",{class:"header-anchor",href:"#什么是编译时","aria-label":'Permalink to "什么是编译时？"'},"​")],-1),s("p",null,"将模板编译成 js 的过程，就是编译时",-1),s("div",{class:"language-vue"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"vue"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"div"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">111</"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"div"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,"把上面这一坨当做一个字符串来解析，解析成 js 文件，这个过程叫做编译时：",-1),s("ol",null,[s("li",null,"把 .vue 文件的内容当做一个字符串，转换成 ast 语法树（ast语法树只是用来描述语法的），它是一个对象"),s("li",null,[i("把 ast 语法树，转换成我们运行时的代码 "),s("code",null,"createElementBlock"),i("、"),s("code",null,"createElementVNode"),i("、"),s("code",null,"createVNode")])],-1),s("p",null,[i("我们把 "),s("code",null,"<div>111</div>"),i(" 转换为 ast 语法树")],-1),s("div",{class:"language-js"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"js"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," ast"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  type: "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 对应的标记就是1")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  tag: "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'div'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  children: [")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      type: "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      content: "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'111'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    },")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ],")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 把上面的 ast 语法树转换成 我们的运行时的代码")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," vnode"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," createElementBlock"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'div'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"null"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", ["),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'111'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"])")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("p",null,[s("a",{href:"https://astexplorer.net/",target:"_blank",rel:"noreferrer"},"https://astexplorer.net/"),i(" 可以看到 ast 语法树解析出来的结果")],-1),s("p",null,"知道了这个概念之后，我们接下来就来完成模板编译成 ast 语法树的过程",-1),s("h3",{id:"模板解析",tabindex:"-1"},[i("模板解析 "),s("a",{class:"header-anchor",href:"#模板解析","aria-label":'Permalink to "模板解析"'},"​")],-1)])]),"main-header":a(()=>[e(t.$slots,"main-header")]),"main-header-after":a(()=>[e(t.$slots,"main-header-after")]),"main-nav":a(()=>[e(t.$slots,"main-nav")]),"main-content-before":a(()=>[e(t.$slots,"main-content-before")]),"main-content":a(()=>[e(t.$slots,"main-content")]),"main-content-after":a(()=>[e(t.$slots,"main-content-after")]),"main-nav-before":a(()=>[e(t.$slots,"main-nav-before")]),"main-nav-after":a(()=>[e(t.$slots,"main-nav-after")]),comment:a(()=>[e(t.$slots,"comment")]),footer:a(()=>[e(t.$slots,"footer")]),aside:a(()=>[e(t.$slots,"aside")]),"aside-custom":a(()=>[e(t.$slots,"aside-custom")]),default:a(()=>[e(t.$slots,"default")]),_:3},8,["frontmatter"])}}};export{x as default,F as usePageData};
